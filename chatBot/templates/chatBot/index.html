<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Projexis Bot</title>

  <!-- Fonts and Styles -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --beige: #E8E1DA;
      --orange: #FEB856;
      --text-dark: #333;
      --white: #fff;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--beige);
      color: var(--text-dark);
      margin: 0;
      padding: 0;
    }

    h1, h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    section {
      background-color: var(--white);
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.07);
      margin: 40px auto;
      padding: 40px 30px;
      width: 95%;
      max-width: 1000px;
    }

    form {
      text-align: center;
      margin-top: 20px;
    }

    input[type="text"] {
      padding: 14px;
      font-size: 1.1rem;
      width: 90%;
      max-width: 500px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-bottom: 20px;
    }

    button, input[type="submit"] {
      background-color: var(--orange);
      color: var(--white);
      font-size: 1.1rem;
      border: none;
      padding: 14px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }

    button:hover, input[type="submit"]:hover {
      background-color: #e39e42;
    }

    /* Pinterest-style grid */
    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      padding: 10px;
    }

    .video-card {
      background: var(--white);
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
      overflow: hidden;
      text-align: center;
      padding-bottom: 20px;
      transition: transform 0.2s ease-in-out;
    }

    .video-card:hover {
      transform: scale(1.02);
    }

    .video-card img {
      width: 100%;
      height: auto;
      border-radius: 12px 12px 0 0;
    }

    .video-card p {
      font-size: 1rem;
      font-weight: 600;
      margin-top: 10px;
      padding: 0 10px;
    }

    #map {
      width: 100%;
      height: 400px;
      border-radius: 12px;
      margin-top: 25px;
    }
  </style>
</head>
<body>

  <!-- Hero Section -->
  <section>
    <h1>Welcome to Projexis</h1>
    <p style="font-size: 1.2rem;">Use our chatbot to brainstorm your next creative project. Already have an idea? We’ll help you bring it to life!</p>
  </section>

  <!-- Idea Form -->
  <section>
    <h2>What’s Your Craft Idea?</h2>
    <form id="ideaForm">
      <input type="text" id="idea" name="idea" placeholder="e.g., Candle making" required />
      <br/>
      <input type="submit" value="Search YouTube Tutorials" />
    </form>
  </section>

  <!-- Tutorials -->
  <section id="video-section" style="display:none;">
    <h2>Video Tutorials for Your Idea</h2>
    <div class="grid-container" id="video-grid"></div>
  </section>

  <!-- Craft Store Locator -->
  <section>
    <h2>Find Craft Stores Near You</h2>
    <form id="locationForm">
      <input type="text" id="zip" placeholder="Enter your city or zip code" required />
      <br />
      <button type="submit">Search Stores</button>
    </form>
    <div id="map"></div>
  </section>

  <!-- Scripts -->
  <script>
    // YouTube Video Search
    document.getElementById('ideaForm').addEventListener('submit', async function (e) {
      e.preventDefault();
      const idea = document.getElementById('idea').value;
      const response = await fetch(`/chatBot/api/youtube/?q=${encodeURIComponent(idea)}`);
      const data = await response.json();

      const container = document.getElementById("video-grid");
      container.innerHTML = "";

      if (data.videos && data.videos.length > 0) {
        data.videos.forEach(video => {
          const card = document.createElement("div");
          card.className = "video-card";
          card.innerHTML = `
            <a href="https://www.youtube.com/watch?v=${video.videoId}" target="_blank">
              <img src="${video.thumbnail}" alt="${video.title}" />
              <p>${video.title}</p>
            </a>
          `;
          container.appendChild(card);
        });

        document.getElementById('video-section').style.display = 'block';
      } else {
        container.innerHTML = "<p>No tutorials found. Try another idea!</p>";
        document.getElementById('video-section').style.display = 'block';
      }
    });

    // Google Maps Craft Store Locator
    document.getElementById('locationForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const address = document.getElementById('zip').value;

      const geocoder = new google.maps.Geocoder();
      geocoder.geocode({ address: address }, function (results, status) {
        if (status === 'OK') {
          const userLocation = results[0].geometry.location;
          const map = new google.maps.Map(document.getElementById("map"), {
            center: userLocation,
            zoom: 13,
          });

          const request = {
            location: userLocation,
            radius: '5000',
            keyword: 'craft store',
          };

          const service = new google.maps.places.PlacesService(map);
          service.nearbySearch(request, function (results, status) {
            if (status === google.maps.places.PlacesServiceStatus.OK) {
              results.forEach(place => {
                new google.maps.Marker({
                  map,
                  position: place.geometry.location,
                  title: place.name,
                });
              });
            }
          });
        } else {
          alert('Could not find that location: ' + status);
        }
      });
    });
  </script>

  <!-- Google Maps API -->
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCseiFgaYDtfR-9L3MvAnWlnl1aOyLqYs0&libraries=places">
  </script>
</body>
</html>
